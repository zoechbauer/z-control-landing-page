<ion-header>
  <ion-toolbar>
    <ion-title>What's New</ion-title>
    <ion-buttons slot="end">
      <ion-button
        fill="clear"
        (click)="closeChangelog()"
        (keydown.enter)="closeChangelog()"
      >
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="changelog-container">
    <div class="changelog-intro">
      <h2>Recent Updates</h2>
      <p>Here's what's new in the latest versions of our landing page.</p>
    </div>

    <div class="changelog-entries">
      <ion-card *ngFor="let entry of changelogEntries" class="changelog-card">
        <ion-card-header>
          <ion-card-title>
            <div class="version-header">
              <span class="version-number">Version {{ entry.version }}</span>
              <ion-badge color="primary">{{ entry.date }}</ion-badge>
            </div>
          </ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <!-- Added Features -->
          <div
            *ngIf="entry.added && entry.added.length > 0"
            class="changelog-section"
          >
            <h4 class="section-title added">✨ New Features</h4>
            <ul>
              <li *ngFor="let item of entry.added">
                <span [innerHTML]="item.text"></span>
                <ul
                  *ngIf="item.children && item.children.length > 0"
                  class="nested-list"
                >
                  <li
                    *ngFor="let child of item.children"
                    [innerHTML]="child.text"
                  ></li>
                </ul>
              </li>
            </ul>
          </div>

          <!-- Fixed Issues -->
          <div
            *ngIf="entry.fixed && entry.fixed.length > 0"
            class="changelog-section"
          >
            <h4 class="section-title fixed">🐛 Fixes</h4>
            <ul>
              <li *ngFor="let item of entry.fixed">
                <span [innerHTML]="item.text"></span>
                <ul
                  *ngIf="item.children && item.children.length > 0"
                  class="nested-list"
                >
                  <li
                    *ngFor="let child of item.children"
                    [innerHTML]="child.text"
                  ></li>
                </ul>
              </li>
            </ul>
          </div>

          <!-- Improvements -->
          <div
            *ngIf="entry.improved && entry.improved.length > 0"
            class="changelog-section"
          >
            <h4 class="section-title improved">🚀 Improvements</h4>
            <ul>
              <li *ngFor="let item of entry.improved">
                <span [innerHTML]="item.text"></span>
                <ul
                  *ngIf="item.children && item.children.length > 0"
                  class="nested-list"
                >
                  <li
                    *ngFor="let child of item.children"
                    [innerHTML]="child.text"
                  ></li>
                </ul>
              </li>
            </ul>
          </div>

          <!-- Features -->
          <div
            *ngIf="entry.features && entry.features.length > 0"
            class="changelog-section"
          >
            <h4 class="section-title features">🎉 Initial Release</h4>
            <ul>
              <li *ngFor="let item of entry.features">
                <span [innerHTML]="item.text"></span>
                <ul
                  *ngIf="item.children && item.children.length > 0"
                  class="nested-list"
                >
                  <li
                    *ngFor="let child of item.children"
                    [innerHTML]="child.text"
                  ></li>
                </ul>
              </li>
            </ul>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>
